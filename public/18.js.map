{"version":3,"sources":["webpack:///./resources/js/pages/admin/Permission.vue?a6a6","webpack:///resources/js/components/admin/permission/PermissionTable.vue","webpack:///./resources/js/components/admin/permission/PermissionTable.vue?72c1","webpack:///./resources/js/pages/admin/Permission.vue?f76e","webpack:///resources/js/pages/admin/Permission.vue","webpack:///./resources/js/components/admin/permission/PermissionTable.vue","webpack:///./resources/js/components/admin/permission/PermissionTable.vue?96a9","webpack:///./resources/js/pages/admin/Permission.vue"],"names":["a","_vm","this","_h","$createElement","_c","_self","attrs","slot","style","marginLeft","on","onReset","_v","staticStyle","onSearch","model","value","callback","$$v","keyword","expression","columns","loading","record","id","permissions","pagination","onChange","scopedSlots","_u","key","fn","_s","name","float","tagColor","role","colorActive","_f","is_active","onChangeActive","role_id","onChangeRole","_l","index","margin","role_name"],"mappings":"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","file":"18.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('permission-table')}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <a-card title=\"Phân quyền\" :bordered=\"false\">\r\n    <div slot=\"extra\">\r\n      <a-button\r\n        icon=\"sync\"\r\n        :style=\"{ marginLeft: '8px' }\"\r\n        @click=\"onReset\"\r\n      ></a-button>\r\n      <a-input-search\r\n        placeholder=\"Tìm kiếm...\"\r\n        v-model=\"keyword\"\r\n        @search=\"onSearch\"\r\n        style=\"margin-left: 8px; width: 250px;\"\r\n      />\r\n    </div>\r\n\r\n    <a-table\r\n      :columns=\"columns\"\r\n      :loading=\"loading\"\r\n      :rowKey=\"record => record.id\"\r\n      :dataSource=\"permissions\"\r\n      :pagination=\"pagination\"\r\n      @change=\"onChange\"\r\n    >\r\n      <template slot=\"name\" slot-scope=\"record\">\r\n        <span>\r\n          {{ record.name }}\r\n          <a-tag :color=\"tagColor(record.role)\" :style=\"{ float: 'right' }\">{{\r\n            record.role\r\n          }}</a-tag>\r\n        </span>\r\n      </template>\r\n      <template slot=\"status\" slot-scope=\"record\">\r\n        <a-tag :color=\"colorActive(record)\">{{ record | status }}</a-tag>\r\n      </template>\r\n      <template slot=\"active\" slot-scope=\"record\">\r\n        <a-checkbox\r\n          @change=\"onChangeActive\"\r\n          :defaultChecked=\"record.is_active\"\r\n          :value=\"record.id\"\r\n        ></a-checkbox>\r\n      </template>\r\n      <template slot=\"action\" slot-scope=\"record\">\r\n        <a-radio-group\r\n          :name=\"`p__${record.id}`\"\r\n          :defaultValue=\"record.role_id\"\r\n          @change=\"onChangeRole\"\r\n        >\r\n          <a-radio\r\n            v-for=\"(role, index) in roles\"\r\n            :key=\"index\"\r\n            :value=\"role.id\"\r\n            :style=\"{ margin: '0 4px' }\"\r\n          >\r\n            <a-tag :color=\"tagColor(role.role_name)\">\r\n              {{ role.role_name }}\r\n            </a-tag>\r\n          </a-radio>\r\n        </a-radio-group>\r\n      </template>\r\n    </a-table>\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    isNotNull,\r\n    colorActive,\r\n    tagColor,\r\n    cleanAccents\r\n  } from \"@/helpers/tools\";\r\n  import { mapActions, mapGetters } from \"vuex\";\r\n  export default {\r\n    data() {\r\n      return {\r\n        pagination: {},\r\n        keyword: null\r\n      };\r\n    },\r\n    computed: {\r\n      ...mapGetters(\"permission\", [\"loading\", \"permissions\", \"roles\"]),\r\n      columns() {\r\n        const columns = [\r\n          {\r\n            title: \"Họ tên\",\r\n            scopedSlots: { customRender: \"name\" }\r\n          },\r\n          {\r\n            title: \"Email\",\r\n            dataIndex: \"email\",\r\n            sorter: true\r\n          },\r\n          {\r\n            title: \"Trạng thái\",\r\n            dataIndex: \"is_active\",\r\n            sorter: true,\r\n            scopedSlots: { customRender: \"status\" }\r\n          },\r\n          {\r\n            title: \"Active\",\r\n            align: \"center\",\r\n            scopedSlots: { customRender: \"active\" }\r\n          },\r\n          {\r\n            title: \"Quyền\",\r\n            key: \"action\",\r\n            align: \"center\",\r\n            scopedSlots: { customRender: \"action\" }\r\n          }\r\n        ];\r\n        return columns;\r\n      }\r\n    },\r\n    created() {\r\n      this.fetch();\r\n      this.fetchRoles();\r\n    },\r\n    methods: {\r\n      ...mapActions(\"permission\", [\r\n        \"fetchPermissions\",\r\n        \"fetchRoles\",\r\n        \"updatePermission\"\r\n      ]),\r\n      retrievePermissions() {\r\n        this.fetch();\r\n      },\r\n      onSearch(value, event) {\r\n        if (isNotNull(value)) {\r\n          let params = {\r\n            page: this.pagination.current,\r\n            keyword: value\r\n          };\r\n          this.fetch(params);\r\n          this.keyword = value;\r\n        }\r\n      },\r\n      onReset() {\r\n        this.retrievePermissions();\r\n        this.keyword = null;\r\n      },\r\n      onChangeActive(e) {\r\n        const permission = {\r\n          id: e.target.value,\r\n          values: { is_active: e.target.checked }\r\n        };\r\n        this.updatePermission(permission);\r\n      },\r\n      onChangeRole(e) {\r\n        const roleId = e.target.value;\r\n        const userId = +e.target.name.replace(\"p__\", \"\");\r\n        const permission = {\r\n          id: userId,\r\n          values: { role_id: roleId }\r\n        };\r\n        this.updatePermission(permission);\r\n      },\r\n      async fetch(params = {}) {\r\n        const pagination = { ...this.pagination };\r\n        const { data, config } = await this.fetchPermissions(params);\r\n        window.history.replaceState(\"permission\", \"\", config.url);\r\n        pagination.total = data.meta.total;\r\n        pagination.pageSize = data.meta.per_page;\r\n        pagination.current = data.meta.current_page;\r\n        this.pagination = pagination;\r\n      },\r\n      onChange(pagination, filters, sorter) {\r\n        const pager = { ...this.pagination };\r\n        pager.current = pagination.current;\r\n        this.pagination = pager;\r\n        let params = {\r\n          page: pagination.current,\r\n          sortBy: sorter.field,\r\n          orderBy:\r\n            sorter.order === \"ascend\"\r\n              ? \"asc\"\r\n              : sorter.order === \"descend\"\r\n              ? \"desc\"\r\n              : undefined,\r\n          keyword: this.keyword\r\n        };\r\n        this.fetch(params);\r\n      },\r\n      tagColor(v) {\r\n        return tagColor(v);\r\n      },\r\n      colorActive(v) {\r\n        return colorActive(v);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PermissionTable.vue?vue&type=script&lang=js&\"","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Permission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Permission.vue?vue&type=script&lang=js&\"","<template>\r\n  <permission-table></permission-table>\r\n</template>\r\n\r\n<script>\r\n  import PermissionTable from \"@/components/admin/permission/PermissionTable\";\r\n  export default {\r\n    components: { PermissionTable }\r\n  };\r\n</script>\r\n\r\n<style></style>\r\n","import { render, staticRenderFns } from \"./PermissionTable.vue?vue&type=template&id=b85690a2&\"\nimport script from \"./PermissionTable.vue?vue&type=script&lang=js&\"\nexport * from \"./PermissionTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-card',{attrs:{\"title\":\"Phân quyền\",\"bordered\":false}},[_c('div',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[_c('a-button',{style:({ marginLeft: '8px' }),attrs:{\"icon\":\"sync\"},on:{\"click\":_vm.onReset}}),_vm._v(\" \"),_c('a-input-search',{staticStyle:{\"margin-left\":\"8px\",\"width\":\"250px\"},attrs:{\"placeholder\":\"Tìm kiếm...\"},on:{\"search\":_vm.onSearch},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}})],1),_vm._v(\" \"),_c('a-table',{attrs:{\"columns\":_vm.columns,\"loading\":_vm.loading,\"rowKey\":function (record) { return record.id; },\"dataSource\":_vm.permissions,\"pagination\":_vm.pagination},on:{\"change\":_vm.onChange},scopedSlots:_vm._u([{key:\"name\",fn:function(record){return [_c('span',[_vm._v(\"\\n        \"+_vm._s(record.name)+\"\\n        \"),_c('a-tag',{style:({ float: 'right' }),attrs:{\"color\":_vm.tagColor(record.role)}},[_vm._v(_vm._s(record.role))])],1)]}},{key:\"status\",fn:function(record){return [_c('a-tag',{attrs:{\"color\":_vm.colorActive(record)}},[_vm._v(_vm._s(_vm._f(\"status\")(record)))])]}},{key:\"active\",fn:function(record){return [_c('a-checkbox',{attrs:{\"defaultChecked\":record.is_active,\"value\":record.id},on:{\"change\":_vm.onChangeActive}})]}},{key:\"action\",fn:function(record){return [_c('a-radio-group',{attrs:{\"name\":(\"p__\" + (record.id)),\"defaultValue\":record.role_id},on:{\"change\":_vm.onChangeRole}},_vm._l((_vm.roles),function(role,index){return _c('a-radio',{key:index,style:({ margin: '0 4px' }),attrs:{\"value\":role.id}},[_c('a-tag',{attrs:{\"color\":_vm.tagColor(role.role_name)}},[_vm._v(\"\\n            \"+_vm._s(role.role_name)+\"\\n          \")])],1)}),1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Permission.vue?vue&type=template&id=8cfe6eaa&\"\nimport script from \"./Permission.vue?vue&type=script&lang=js&\"\nexport * from \"./Permission.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}